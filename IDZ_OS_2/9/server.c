#include <fcntl.h>#include <semaphore.h>#include <signal.h>#include <stdbool.h>#include <stdio.h>#include <stdlib.h>#include <sys/mman.h>#include <unistd.h>#define SINGLE_ROOMS 10#define DOUBLE_ROOMS 15#define TOTAL_ROOMS (SINGLE_ROOMS + DOUBLE_ROOMS)typedef struct {  int single_rooms;  int double_rooms;  int single_occupants;  int double_occupants;} hotel_status;static hotel_status *hotel;static sem_t *sem_single, *sem_double, *sem_mutex;static bool should_exit = false;void signal_handler(int signal) { should_exit = true; }void init_shared_memory() {  int shm_fd = shm_open("hotel_shm", O_CREAT | O_RDWR, 0666);  if (shm_fd == -1) {    perror("shm_open");    exit(1);  }  if (ftruncate(shm_fd, sizeof(hotel_status)) == -1) {    perror("ftruncate");    exit(1);  }  hotel = (hotel_status *)mmap(NULL, sizeof(hotel_status),                               PROT_READ | PROT_WRITE, MAP_SHARED, shm_fd, 0);  if (hotel == MAP_FAILED) {    perror("mmap");    exit(1);  }  close(shm_fd);}void init_semaphores() {  sem_single = sem_open("sem_single", O_CREAT, 0666, SINGLE_ROOMS);  sem_double = sem_open("sem_double", O_CREAT, 0666, DOUBLE_ROOMS);  sem_mutex = sem_open("sem_mutex", O_CREAT, 0666, 1);}void destroy_shared_memory() {  munmap(hotel, sizeof(hotel_status));  shm_unlink("hotel_shm");}void destroy_semaphores() {  sem_close(sem_single);  sem_close(sem_double);  sem_close(sem_mutex);  sem_unlink("sem_single");  sem_unlink("sem_double");  sem_unlink("sem_mutex");}int main() {  signal(SIGINT, signal_handler);  init_shared_memory();  init_semaphores();  hotel->single_rooms = SINGLE_ROOMS;  hotel->double_rooms = DOUBLE_ROOMS;  hotel->single_occupants = 0;  hotel->double_occupants = 0;  printf("Hotel server is running. Press Ctrl+C to terminate.\n");  while (!should_exit) {    usleep(500000);  }  destroy_shared_memory();  destroy_semaphores();  return 0;}